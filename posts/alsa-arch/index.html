<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<base href="https://sdll.github.io/posts/alsa-arch/">
<meta name="viewport" content="width=device-width">
<title>ALSA, ALSAEqual &amp; ARCH LINUX | sdll</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#259359" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://sdll.github.io/posts/alsa-arch/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><link rel="stylesheet" href="../../assets/scripts/katex/katex.min.css">
<meta name="author" content="sdll">
<link rel="next" href="../mtrack-arch-linux/" title="mTRACK &amp; ARCH LINUX" type="text/html">
<meta property="og:site_name" content="sdll">
<meta property="og:title" content="ALSA, ALSAEqual &amp; ARCH LINUX">
<meta property="og:url" content="https://sdll.github.io/posts/alsa-arch/">
<meta property="og:description" content="Given:

Arch Linux w/ 4.2.5-1-ARCH kernel
Macbook Pro Late 2013

Wanted:
global sound settings compatible with all the applications installed
Solution:
Kernel-driven sound card drivers are provided by">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-12-23T00:00:00Z">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
         
    <header id="header"><h1 id="brand"><a href="https://sdll.github.io/" title="sdll" rel="home">
        <img src="../../assets/site/logo.png" alt="logo of sdll" id="logo">

        sdll
    </a></h1>

        

        
    <nav id="menu"><ul>
<li><a href="../../about">About</a></li>
                <li><a href="../../pub">Pub</a></li>
                <li><a href="../../gallery">Gallery</a></li>
                <li><a href="../../links">Links</a></li>
                <li><a href="../../archive.html">Archive</a></li>
                <li><a href="../../categories/">Categories</a></li>
                <li><a href="../../rss.xml">RSS</a></li>
                <li><a href="https://github.com/sdll">Github</a></li>
    
    
    </ul></nav><div class="searchform" role="search">
                
<!-- DuckDuckGo custom search -->
<form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form">
<input type="hidden" name="sites" value="https://sdll.github.io/"><input type="hidden" name="ku" value="1"><input type="hidden" name="kh" value="1"><input type="hidden" name="kn" value="1"><input type="hidden" name="k1" value="-1"><input type="hidden" name="kae" value="c"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;border:none;font-size:1.2em;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->

            </div>
    </header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">ALSA, ALSAEqual &amp; ARCH LINUX</a></h1>

        <div class="metadata">
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2015-12-23T00:00:00Z" itemprop="datePublished" title="23 Dec 2015">23 Dec 2015</time></a></p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Given:</p>
<ul>
<li>Arch Linux w/ 4.2.5-1-ARCH kernel</li>
<li>Macbook Pro Late 2013</li>
</ul>
<p>Wanted:</p>
<p style="padding-left:30px;">global sound settings compatible with all the applications installed</p>
<p>Solution:</p>
<p style="padding-left:30px;">Kernel-driven sound card drivers are provided by the ALSA framework, which has replaced the OSS. To learn more, consult the <a href="https://wiki.archlinux.org/index.php/ALSA">guide</a> on Arch Linux wiki I have found particularly helpful.</p>
<p style="padding-left:30px;text-align:left;">First, install the <strong>alsa-utils</strong> package. By default, all the sound channels are initially muted. Manually unmute the channels by typing <strong>alsamixer </strong>command, choosing the required channels and pressing <strong>m</strong>.</p>
<p style="padding-left:30px;">Secondly, check the ID of your sound card by typing the shell command <strong>aplay -l</strong>. The ID of my sound card was HDMI. Set the default sound card by creating the file at <strong>/etc/modprobe.d/alsa-base.conf </strong>:</p>
<p style="padding-left:60px;">options snd_hda_intel index=0 model=intel-mac-auto id=PCH<br>
options snd_hda_intel index=1 model=intel-mac-auto id=HDMI</p>
<p style="padding-left:30px;">Thirdly, install <strong>alsa-oss </strong>to insure compatibility of the OSS applications with <strong>dmix</strong>. Then load the kernel modules by executing <strong>sudo modprobe snd-seq-oss snd-pcm-oss snd-mixer-oss .</strong></p>
<p style="padding-left:30px;">Next, install the <strong>alsaequal</strong> package which provides the system equaliser. Edit the global ALSA configuration file located at /etc/asound.conf, replacing HDMI with your ID:</p>
<pre>
<code class="bash">
pcm.!default {
    type plug
    slave.pcm {
        @func getenv
        vars [ ALSAPCM ]
        default "hw:HDMI"
    }
}
ctl.equal {
    type equal;
}

pcm.plugequal {
    type equal;
    # Modify the line below if you do not
    # want to use sound card 0.
    #slave.pcm "plughw:0,0";
    # by default we want to play from more sources at time:
    slave.pcm "plug:dmix";
}

# pcm.equal {
# If you do not want the equalizer to be your
# default soundcard comment the following
# line and uncomment the above line. (You can
# choose it as the output device by addressing
# it with specific apps,eg mpg123 -a equal 06.Back_In_Black.mp3)
pcm.!default {
    type plug;
    slave.pcm plugequal;
}

pcm.dsp {
    type plug
    slave.pcm "dmix"
}

</code>
</pre>
<p style="padding-left:30px;">Finally, reboot and ensure the setup works by executing <strong>speaker-test</strong>.</p>
<p>If everything is alright, congratulations! Otherwise, do not suffer alone; there are people happy to help!</p>
<p style="padding-left:30px;"></p>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="next">
                <a href="../mtrack-arch-linux/" rel="next" title="mTRACK &amp; ARCH LINUX">Next post</a>
            </li>
        </ul></nav></aside></article></main>
</div>
    
    

    
    
    
</body>
</html>
